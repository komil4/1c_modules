//Получение двух дат(периода) из строки
Функция ПолучитьПериодыИзСтроки(Комментарий)
	
	СтруктураПериоды = Новый Структура;
	
	//Тут надо обработать строку с периодами и вычленить из них даты
	БылЛиДефис = Ложь; 
	
	ДлинаСтроки = СтрДлина(Комментарий);
	
	МассивСтрок = Новый Массив;
		
	КопияСтроки = "";
	Для Сч = 1 По ДлинаСтроки Цикл
		КолСим = 0;
		Символ = Сред(Комментарий, Сч, 1);
		Если Сч + 5 <= ДлинаСтроки Тогда
			Если ПроверитьСимвол(Символ) = 1
				И ПроверитьСимвол(Сред(Комментарий, Сч + 1, 1)) = 1
				И ПроверитьСимвол(Сред(Комментарий, Сч + 2, 1)) = 3
				И ПроверитьСимвол(Сред(Комментарий, Сч + 3, 1)) = 1
				И ПроверитьСимвол(Сред(Комментарий, Сч + 4, 1)) = 1 Тогда
				
				Если МассивСтрок.Количество() > 1 Тогда
					Продолжить;
				ИначеЕсли МассивСтрок.Количество() = 1 Тогда
					Если БылЛиДефис = Ложь Тогда
						МассивСтрок.Очистить();
					КонецЕсли;
				КонецЕсли;

				Если Сч + 5 <= ДлинаСтроки Тогда
					Если ПроверитьСимвол(Сред(Комментарий, Сч + 5, 1)) = 3
						И ПроверитьСимвол(Сред(Комментарий, Сч + 6, 1)) = 1
						И ПроверитьСимвол(Сред(Комментарий, Сч + 7, 1)) = 1 Тогда
					КолСим = 8;
						Если Сч + 9 <= ДлинаСтроки Тогда
							Если ПроверитьСимвол(Сред(Комментарий, Сч + 8, 1)) = 1
							И ПроверитьСимвол(Сред(Комментарий, Сч + 9, 1)) = 1 Тогда
								КолСим = 10;
							Иначе 
								КолСим = 8;
							КонецЕсли;
						Иначе
							КолСим = 8;
						КонецЕсли;
					Иначе 
						КолСим = 5;
					КонецЕсли;
				Иначе
					КолСим = 5;
				КонецЕсли;
				
				МассивСтрок.Добавить(Сред(Комментарий, Сч, КолСим));
				Сч = Сч + КолСим - 1;
			КонецЕсли;
		КонецЕсли;
		Если ПроверитьСимвол(Символ) = 2 Тогда
			БылЛиДефис = Истина;
		Иначе
			БылЛиДефис = Ложь;
		КонецЕсли;
	КонецЦикла;
	
	
	Если МассивСтрок.Количество() > 1 Тогда
		//СозданиеДатыНачала
		Если СтрДлина(МассивСтрок[0]) = 5 Тогда
			Если СтрДлина(МассивСтрок[1]) = 8 Тогда
				СтрНачало = МассивСтрок[0] + ".20" + Прав(МассивСтрок[1], 2);
			ИначеЕсли СтрДлина(МассивСтрок[1]) = 10 Тогда 
				СтрНачало = МассивСтрок[0] + "." + Прав(МассивСтрок[1], 4);		
			Иначе
				СтрНачало = МассивСтрок[0] + "." + Строка(Год(ТекущаяДата()));	
			КонецЕсли;
		ИначеЕсли СтрДлина(МассивСтрок[0]) = 8 Тогда
			СтрНачало = Лев(МассивСтрок[0], 6) + "20" + Прав(МассивСтрок[0], 2);
		Иначе
			СтрНачало = МассивСтрок[0];
		КонецЕсли;
		СтрНачало = СтрНачало + " 00:00:00";
		СтруктураПериоды.Вставить("НачалоПериода", Дата(СтрНачало));
		
		//СозданиеДатыКонца
		Если СтрДлина(МассивСтрок[1]) = 5 Тогда
			Если СтрДлина(МассивСтрок[0]) = 8 Тогда
				СтрКонец = МассивСтрок[1] + ".20" + Прав(МассивСтрок[0], 2);
			ИначеЕсли СтрДлина(МассивСтрок[0]) = 10 Тогда 
				СтрКонец = МассивСтрок[1] + "." + Прав(МассивСтрок[0], 4);		
			Иначе
				СтрКонец = МассивСтрок[1] + "." + Строка(Год(ТекущаяДата()));	
			КонецЕсли;
		ИначеЕсли СтрДлина(МассивСтрок[1]) = 8 Тогда
			СтрКонец = Лев(МассивСтрок[1], 6) + "20" + Прав(МассивСтрок[1], 2);
		Иначе
			СтрКонец = МассивСтрок[1];
		КонецЕсли;
		СтрКонец = СтрКонец + " 00:00:00";
		СтруктураПериоды.Вставить("КонецПериода", Дата(СтрКонец));
	Иначе	
		СтруктураПериоды.Вставить("НачалоПериода",  Дата(1, 1, 1));
		СтруктураПериоды.Вставить("КонецПериода",  Дата(1, 1, 1));
	КонецЕсли;
	
	Сообщить(СтруктураПериоды.НачалоПериода);
	Сообщить(СтруктураПериоды.КонецПериода);	
		
	Возврат СтруктураПериоды;
	
КонецФункции

Функция ПроверитьСимвол(СтрСимвол)
	
	МассивЦифр = Новый Массив;
	МассивЦифр.Добавить("1");
	МассивЦифр.Добавить("2");
	МассивЦифр.Добавить("3");
	МассивЦифр.Добавить("4");
	МассивЦифр.Добавить("5");
	МассивЦифр.Добавить("6");
	МассивЦифр.Добавить("7");
	МассивЦифр.Добавить("8");
	МассивЦифр.Добавить("9");
	МассивЦифр.Добавить("0");
	МассивЗнаков = Новый Массив;
	МассивЗнаков.Добавить("-");
	МассивРазделителей = Новый Массив;
	МассивРазделителей.Добавить(".");
	Если МассивЦифр.Найти(СтрСимвол) <> Неопределено Тогда 
		Возврат 1;
	ИначеЕсли МассивЗнаков.Найти(СтрСимвол) <> Неопределено Тогда
		Возврат 2;
	ИначеЕсли МассивРазделителей.Найти(СтрСимвол) <> Неопределено Тогда
		Возврат 3;
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции	
